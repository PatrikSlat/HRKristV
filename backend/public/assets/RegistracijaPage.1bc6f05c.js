import{a as v,Q as c}from"./QCard.4a2f20aa.js";import{Q as k,a as r}from"./QForm.bf298595.js";import{Q as g}from"./QBtn.03a6d40c.js";import{Q as w}from"./QPage.f683395d.js";import{a0 as h,I as y,J as z,K as n,r as u,x as V,L as t,R as i,a3 as U,w as j,a8 as D}from"./index.fab7c2d1.js";import{a as O}from"./axios.703e2798.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";import"./render.b3f1a79a.js";import"./use-dark.5ea04310.js";const R=h({name:"RegistracijaPage",setup(){const o=u(null),a=u({nazivUdruge:"",oibUdruge:"",kontaktOsoba:"",email:"",telefon:"",poruka:"",honeypot:""}),m="6LcHG14rAAAAAC0OGkLyXUJvaEQLpEQZu2aK2u-v",s=u(null),l=u(""),p="http://localhost:3000/api/registracija-zahtjev/organizator";V(()=>{l.value="",window.grecaptcha&&s.value&&window.grecaptcha.render(s.value,{sitekey:m,callback:function(f){l.value=f}})});async function e(){if(!await o.value.validate()){console.log("Forma nije validna, korisnik treba ispraviti gre\u0161ke.");return}if(!l.value){alert("Molimo ozna\u010Dite da niste robot!");return}if(a.value.honeypot){console.log("Neko botuje formu !"),d();return}try{await O.post(p,{nazivUdruge:a.value.nazivUdruge,oibUdruge:a.value.oibUdruge,kontaktOsoba:a.value.kontaktOsoba,email:a.value.email,telefon:a.value.telefon,poruka:a.value.poruka,recaptchaToken:l.value}),d(),window.grecaptcha&&window.grecaptcha.reset(),l.value=""}catch(b){console.error("Gre\u0161ka slanje:",b),window.grecaptcha&&window.grecaptcha.reset(),l.value=""}}function d(){a.value={nazivUdruge:"",oibUdruge:"",kontaktOsoba:"",email:"",telefon:"",poruka:"",honeypot:""},o.value&&o.value.resetValidation(),window.grecaptcha&&window.grecaptcha.reset(),l.value=""}return{formData:a,handleFormSubmit:e,onReset:d,registrationFormRef:o,recaptcha:s,recaptchaToken:l}}}),B={style:{position:"absolute",left:"-5000px"},"aria-hidden":"true"},F={class:"q-mt-md flex flex-center"},I={ref:"recaptcha"},K={class:"q-mt-lg"};function P(o,a,m,s,l,p){return y(),z(w,{padding:"",class:"flex flex-center bg-grey-2 registration-page"},{default:n(()=>[t(c,{class:"registration-card shadow-5",style:{width:"100%","max-width":"500px"}},{default:n(()=>[t(v,{class:"bg-primary text-white"},{default:n(()=>a[7]||(a[7]=[i("div",{class:"text-h6 text-center"},"Prijava za Organizatora",-1)])),_:1,__:[7]}),t(v,{class:"q-pa-md"},{default:n(()=>[t(k,{onSubmit:U(o.handleFormSubmit,["prevent"]),onReset:o.onReset,ref:"registrationFormRef",class:"q-gutter-sm"},{default:n(()=>[t(r,{outlined:"",modelValue:o.formData.nazivUdruge,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.nazivUdruge=e),label:"Naziv udruge/organizacije *","lazy-rules":"",rules:[e=>!!e||"Naziv udruge je obavezan"]},null,8,["modelValue","rules"]),t(r,{outlined:"",modelValue:o.formData.oibUdruge,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.oibUdruge=e),label:"OIB udruge *","lazy-rules":"",rules:[e=>!!e||"OIB je obavezan",e=>e&&e.length===11||"OIB mora imati 11 znamenki",e=>/^\d+$/.test(e)||"OIB smije sadr\u017Eavati samo brojeve"]},null,8,["modelValue","rules"]),t(r,{outlined:"",modelValue:o.formData.kontaktOsoba,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.kontaktOsoba=e),label:"Kontakt osoba *","lazy-rules":"",rules:[e=>!!e||"Kontakt osoba je obavezna"]},null,8,["modelValue","rules"]),t(r,{outlined:"",type:"email",modelValue:o.formData.email,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.email=e),label:"Email adresa *","lazy-rules":"",rules:[e=>!!e||"Email je obavezan",e=>/.+@.+\..+/.test(e)||"Unesite ispravan email"]},null,8,["modelValue","rules"]),t(r,{outlined:"",type:"tel",modelValue:o.formData.telefon,"onUpdate:modelValue":a[4]||(a[4]=e=>o.formData.telefon=e),label:"Broj telefona"},null,8,["modelValue"]),t(r,{outlined:"",modelValue:o.formData.poruka,"onUpdate:modelValue":a[5]||(a[5]=e=>o.formData.poruka=e),type:"textarea",label:"Kratka poruka",autogrow:""},null,8,["modelValue"]),i("div",B,[j(i("input",{type:"text",name:"extra-field-honeypot","onUpdate:modelValue":a[6]||(a[6]=e=>o.formData.honeypot=e),tabindex:"-1",autocomplete:"off"},null,512),[[D,o.formData.honeypot]])]),i("div",F,[i("div",I,null,512)]),i("div",K,[t(g,{label:"Po\u0161alji Prijavu",type:"submit",color:"primary",class:"full-width",size:"lg",disable:!o.recaptchaToken},null,8,["disable"]),t(g,{label:"O\u010Disti",type:"reset",color:"primary",flat:"",class:"q-mt-sm full-width"})])]),_:1},8,["onSubmit","onReset"])]),_:1})]),_:1})]),_:1})}var M=Q(R,[["render",P]]);export{M as default};
